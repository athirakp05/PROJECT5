<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Count</title>
    <style>
        /* Add styling for card bodies */
        .card-body {
            border-radius: 5px;
            padding: 10px;
            margin: 20px;
            text-align: center;
        }

        /* Add background colors for different card classes */
        .card-light-blue {
            background-color: #a8d0e6;
            border: 1px solid #4682b4;
            width: 300px;
            height: 200px;
        }

        .card-light-danger {
            background-color: #f29292;
            border: 1px solid #d9534f;
            width: 300px;
            height: 200px;
        }

        /* Add text color for card titles */
        .card-title {
            color: #333;
        }

        /* Add text color for card content */
        .card-content {
            color: #000;
        
        }
    </style>
</head>
<body>
    <h1>Users</h1>

        <div class="col">
            <div class="col-md-6 mb-4 mb-lg-0 stretch-card transparent">
                <div class="card card-light-blue">
                    <div class="card-body">
                        <p class="mb-2">Customers </p>
                        <p class="fs-24 mb-2" id="totalCustomers">{{ customer_count}}</p>
                    </div>
                </div>
            </div>
            <div class="col">
            <div class="col-md-6 mb-4 mb-lg-0 stretch-card transparent">
                <div class="card card-light-danger">
                    <div class="card-body">
                        <p class="mb-2">Sellers   </p>
                        <p class="fs-24 mb-2" id="totalSellers">{{seller_count}}</p>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col">
        <div class="col-md-6 mb-4 mb-lg-0 stretch-card transparent">
            <div class="card card-light-blue">
                <div class="card-body">
                    <p class="mb-2">Products </p>
                    <p class="fs-24 mb-2" id="totalCustomers">{{ customer_count}}</p>
                </div>
            </div>
        </div>
    </div>
        <div class="col">
        <div class="col-md-6 mb-4 mb-lg-0 stretch-card transparent">
            <div class="card card-light-danger">
                <div class="card-body">
                    <p class="mb-2">Orders   </p>
                    <p class="fs-24 mb-2" id="totalSellers">{{seller_count}}</p>
                </div>
        </div>
    </div>
</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        // Function to update user counts in card bodies
        function updateUserCounts() {
            $.ajax({
                url: "{% url 'usercount' %}", // Django URL to retrieve counts
                method: "GET",
                success: function(data) {
                    // Update customer count in the respective card
                    $('#totalCustomers').text(data.customer_count);

                    // Update seller count in the respective card
                    $('#totalSellers').text(data.seller_count);
                },
                error: function(error) {
                    console.log("Error fetching user counts:", error);
                }
            });
        }

        // Automatically update counts initially and every few seconds
        $(document).ready(function() {
            updateUserCounts(); // Update counts initially

            // Refresh counts every 10 seconds (adjust as needed)
            setInterval(function() {
                updateUserCounts();
            }, 10000); // 10 seconds
        });
    </script>
</body>
</html>