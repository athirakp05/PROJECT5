{% load static %}

{% block content %}
<style>
  .container {
    max-width: 1200px;
    margin: auto;
  }

  .card {
    margin-bottom: 20px;
  }

  .card-body {
    padding: 20px;
  }

  .btn {
    cursor: pointer;
  }

  .img-thumbnail {
    max-width: 100%;
    height: auto;
  }

  .remove-cart,
  .plus-cart,
  .minus-cart {
    color: white;
    text-decoration: none;
  }

  .remove-cart:hover,
  .plus-cart:hover,
  .minus-cart:hover {
    text-decoration: none;
  }

  .remove-cart {
    background-color: #dc3545;
  }

  .plus-cart,
  .minus-cart {
    background-color: #28a745;
  }

  .plus-cart:hover,
  .minus-cart:hover {
    background-color: #218838;
  }

  .cart-product {
    display: flex;
    border-bottom: 1px solid #ddd;
    padding-bottom: 15px;
    margin-bottom: 15px;
  }

  .cart-product img {
    max-width: 100px;
    margin-right: 15px;
    border-radius: 5px;
  }

  .cart-product-info {
    flex-grow: 1;
  }

  .cart-summary {
    background-color: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
  }

</style>

<div class="container mt-5">
  <div class="text-center mb-5">
    <h1>Shopping Cart</h1>
  </div>

  <div class="row">
    <div class="col-md-8">
      <div class="card">
        <div class="card-body">
          <h3>Cart</h3>
          {% for item in cart_items %}
          <div class="cart-product">
            <div class="cart-product-img">
              <img src="{{ item.product.image.url }}" alt="{{ item.product.p_name }}" class="img-fluid img-thumbnail shadow-sm">
            </div>
            <div class="cart-product-info">
              <h5>{{ item.product.p_name }}</h5>
              <p class="mb-2 text-muted small">{{ item.product.description }}</p>
              <div class="my-3">
                <label for="quantity">Quantity:</label>
                <a href="#" class="minus-cart btn btn-sm btn-secondary" data-pcode="{{ item.product.p_code }}"><i class="fas fa-minus-square fa-lg"></i></a>
                <span id="quantity_{{ item.product.p_code }}" class="mx-2">{{ item.quantity }}</span>
                <a href="#" class="plus-cart btn btn-sm btn-secondary" data-pcode="{{ item.product.p_code }}"><i class="fas fa-plus-square fa-lg"></i></a>
              </div><br>
              <a href="{% url 'remove_from_cart' p_code=item.product.p_code %}" class="remove-cart btn btn-sm btn-danger">Remove item</a>
 
              <div class="d-flex justify-content-between">
                <p class="mb-0"><span><strong>Rs. {{ item.total_price }}</strong></span></p>
              </div>
            </div>
          </div>
          {% endfor %}
<!-- Display delivery address options -->
{% for address in user_addresses %}
<div class="form-check">
    <input class="form-check-input" type="radio" name="delivery_address" id="address{{ forloop.counter }}" value="{{ address.id }}" {% if forloop.first %}checked{% endif %}>
    <label class="form-check-label" for="address{{ forloop.counter }}">
        {{ address.address }}
    </label>
</div>
{% endfor %}

<div class="col-md-4">
  <div class="card cart-summary">
    <div class="card-body">
      <h5 class="card-title">Order Summary</h5>
      <hr>
      <p>Total items: {{ total_quantity }}</p>
      <p>Total Price: Rs. {{ total_price }}</p>
      <p>Delivery Charge: Rs. 20</p>
      <hr>
      <p>Total Amount: Rs. {{ total_price|add:20 }}</p>
    </div>
  </div>
</div>
</div>
</div><form method="post" action="{% url 'address_confirmation' %}">
    {% csrf_token %}
    <input type="submit" value="Confirm Order">
</form>

{% endblock %}
